# splayæ ‘ (æ ‘ADTè¿è½½ 5/13)

â—ï¸ **ã€NEWã€‘** â—ï¸

- 9-15:  [çº¢é»‘æ ‘ä»å…¥é—¨åˆ°çœ‹å¼€](https://leetcode.cn/circle/discuss/SwgIJV/)

è¿™æ˜¯å°ç™½ yuki æ¨å‡ºçš„ã€Œæ ‘ADTã€ç³»åˆ—æ–‡ç« çš„ç¬¬ 5 ç¯‡ (5/13) ã€‚

***

> $keywords$ :
>
> splayæ ‘ / å±•å¼€ / è‡ªé¡¶å‘ä¸‹å±•å¼€ / æ‘Šè¿˜æ—¶é—´ä¸Šçš„å¹³è¡¡



æœ¬æ–‡ä»‹ç»ä¸€ç§æ˜“äºå®ç°çš„å¹³è¡¡äºŒå‰æŸ¥æ‰¾æ ‘ â€“â€“ splayæ ‘ã€‚å®é™…ä¸Šæœ¬æ–‡æ˜¯ä¸ºäº†åç»­è®²è§£å¤šç§ **å¹³è¡¡äºŒå‰æ ‘** çš„å‰ç½®æ–‡ç« ï¼Œæœ€ç»ˆç›®çš„æ˜¯è®²è§£ **ã€Œçº¢é»‘æ ‘ã€** (å·²æ¨å‡ºï¼Œ[çº¢é»‘æ ‘ä»å…¥é—¨åˆ°çœ‹å¼€](https://leetcode.cn/circle/discuss/SwgIJV/))ã€‚

æœ¬æ–‡é‡ç‚¹åœ¨äºå±•ç°å¦‚ä½•è®¾è®¡ä¸€ä¸ª splayæ ‘ ç±»ï¼Œåˆ†æä¸»è¦æ–¹æ³•çš„ä»£ç å®ç°ï¼Œå¹¶ç»™å‡ºè¯¥ç±»çš„å®Œæ•´å®ç°ä»£ç ã€‚è¯»è€…å­¦ä¹ ä¹‹å **å¯ä»¥è‡ªå·±å†™å‡ºä¸€ä¸ªæ–¹æ³•è¾ƒä¸ºå®Œå¤‡çš„splayæ ‘ç±»** ã€‚

***

yukiçš„å…¶ä»–æ–‡ç« å¦‚ä¸‹ï¼Œæ¬¢è¿é˜…è¯»æŒ‡æ­£ï¼

| æ–‡ç«                                                          | [å‘å¸ƒæ—¶é—´] å­—æ•°/è§ˆ/è—/èµ (~09-23)        |
| ------------------------------------------------------------ | ---------------------------------------- |
| [åå¤§æ’åºä»å…¥é—¨åˆ°å…¥èµ˜](https://leetcode.cn/circle/discuss/eBo9UB/)  ğŸ”¥ğŸ”¥ğŸ”¥ | [20220516]  2.5ä¸‡å­—/58.2kè§ˆ/3.5kè—/865èµ |
| [äºŒåˆ†æŸ¥æ‰¾ä»å…¥é—¨åˆ°å…¥ç¡](https://leetcode.cn/circle/discuss/ooxfo8/) ğŸ”¥ğŸ”¥ğŸ”¥ | [20220509]  2.3ä¸‡å­—/35.9kè§ˆ/2.1kè—/484èµ |
| [å¹¶æŸ¥é›†ä»å…¥é—¨åˆ°å‡ºé—¨](https://leetcode.cn/circle/discuss/qmjuMW/) ğŸ”¥ğŸ”¥ | [20220514]  1.2ä¸‡å­—/15.1kè§ˆ/924è—/279èµ  |
| [å›¾è®ºç®—æ³•ä»å…¥é—¨åˆ°æ”¾ä¸‹](https://leetcode.cn/circle/discuss/FyPTTM/) ğŸ”¥ğŸ”¥ | [20220617]  5.6ä¸‡å­—/17.3kè§ˆ/1.2kè—/341èµ |
| æ ‘ADTç³»åˆ— (é¢„è®¡13ç¯‡)                                         | ç³»åˆ—æ–‡ç« ï¼Œè¿è½½ä¸­                         |
| 3. [äºŒå‰æŸ¥æ‰¾æ ‘](https://leetcode.cn/circle/discuss/wPzlSb/)  | [20220801]  5åƒå­—                        |
| 4. [AVLæ ‘](https://leetcode.cn/circle/discuss/zbwD3p/)       | [20220817]  5åƒå­—                        |
| 5. [splayæ ‘](https://leetcode.cn/circle/discuss/BCK17f/)     | [20220817]  5åƒå­—                        |
| 6. [çº¢é»‘æ ‘ä»å…¥é—¨åˆ°çœ‹å¼€](https://leetcode.cn/circle/discuss/SwgIJV/) ğŸ”¥ğŸ¤¯ğŸ¤¯ğŸ¤¯ | [20220915]  3ä¸‡å­—/3.1kè§ˆ/186è—/52èµ      |
| 10. [æ ‘çŠ¶æ•°ç»„ä»å…¥é—¨åˆ°ä¸‹è½¦](https://leetcode.cn/circle/discuss/qGREiN/) ğŸ”¥ğŸ¤¯ | [20220722]  1.1ä¸‡å­—/3.9kè§ˆ/129è—/49èµ    |
| 11. [çº¿æ®µæ ‘ä»å…¥é—¨åˆ°æ€¥åœ](https://leetcode.cn/circle/discuss/H4aMOn/) ğŸ”¥ğŸ¤¯ | [20220726]  2.5ä¸‡å­—/4.8kè§ˆ/324è—/93èµ    |
| [å›¾è®ºç›¸å…³è¯æ˜ç³»åˆ—](https://leetcode.cn/circle/discuss/GV0JrV/) | ç³»åˆ—æ–‡ç«                                  |
| 1. [Dijkstraæ­£ç¡®æ€§è¯æ˜](https://leetcode.cn/circle/discuss/jJQn7V/) ğŸ¤¯ | [20220531]                               |
| 2. [Primæ­£ç¡®æ€§è¯æ˜](https://leetcode.cn/circle/discuss/VVEc8f/) ğŸ¤¯ | [20220919]                               |
| 3. [Bellman-FordåŠSPFAæ­£ç¡®æ€§è¯æ˜](https://leetcode.cn/circle/discuss/xeEwYl/) | [20220602]                               |
| 4. [Floydæ­£ç¡®æ€§è¯æ˜](https://leetcode.cn/circle/discuss/Nbzix4/) | [20220602]                               |
| 5. [æœ€å¤§æµæœ€å°å‰²å®šç†è¯æ˜](https://leetcode.cn/circle/discuss/tMIy36/) ğŸ¤¯ğŸ¤¯ | [20220719]                               |
| 6. [Edmonds-Karpå¤æ‚åº¦è¯æ˜](https://leetcode.cn/circle/discuss/tN3sZc/) ğŸ¤¯ğŸ¤¯ | [20220515]                               |
| 7. [Dinicå¤æ‚åº¦è¯æ˜](https://leetcode.cn/circle/discuss/T9Xa1R/) ğŸ¤¯ğŸ¤¯ | [20220531]                               |



***

[TOC]

***

### splayæ ‘

ä¼¸å±•æ ‘æ˜¯è§£å†³åŸºæœ¬ BST åœ¨éå¹³è¡¡çŠ¶æ€ä¸‹ä¸»è¦æ“ä½œæ— æ³•è¾¾åˆ° $O(logn)$ å¤æ‚åº¦çš„å¦ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚ç›¸æ¯” AVL æ ‘ï¼Œä¼¸å±•æ ‘å¹¶ä¸ä¸¥æ ¼åœ°ä½¿ BST æ¯æ¬¡æ“ä½œåä¿æŒå¹³è¡¡ï¼Œå› æ­¤ä¼¸å±•æ ‘çš„å•æ¬¡æ“ä½œå¯èƒ½ä¸º $O(n)$ å¤æ‚åº¦ï¼Œä½†ä¼¸å±•æ ‘ä¿è¯ $m$ æ¬¡æ“ä½œçš„æœ€åæ—¶é—´å¤æ‚åº¦ä¸º $mO(logn)$ï¼Œä¹Ÿå°±æ˜¯è¯´å…¶ä¸»è¦æ“ä½œçš„ **å‡æ‘Šæ—¶é—´å¤æ‚åº¦** ä¸º $O(logn)$  ã€‚ä¼¸å±•æ ‘ç›¸å¯¹ AVL æ ‘çš„ä¼˜ç‚¹æ˜¯ **æ— éœ€ç»´æŠ¤æ ‘çš„é«˜åº¦ä¿¡æ¯** ï¼Œä»è€Œèƒ½å¤ŸèŠ‚çœä¸€éƒ¨åˆ†ç©ºé—´ï¼Œä¸”ç¼–ç¨‹ç›¸å¯¹ç®€å•ã€‚ä¼¸å±•æ ‘çš„ä¸»è¦æ“ä½œå‡åŸºäº **ã€Œå±•å¼€ (splay)ã€** ï¼Œå±•å¼€æ“ä½œçš„åŸºç¡€æ˜¯æˆ‘ä»¬å·²åœ¨ AVL ä¸­è®²è§£è¿‡çš„æ—‹è½¬ï¼Œ **ã€Œå±•å¼€ã€åŠ¨ä½œå°†ç›®æ ‡ç»“ç‚¹æ—‹è½¬è‡³æ ¹ç»“ç‚¹å¤„ï¼Œå¹¶åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­è°ƒæ•´æ²¿é€”ä¸Šçš„ç»“ç‚¹** ã€‚æœ¬èŠ‚å°†ä»‹ç»ä¸€ç§åªéœ€ $O(1)$ è¾…åŠ©ç©ºé—´çš„ã€Œè‡ªé¡¶å‘ä¸‹ã€å±•å¼€çš„ä¼¸å±•æ ‘ã€‚


> ä¼¸å±•æ ‘ç”± [Daniel Sleator](https://en.wikipedia.org/wiki/Daniel_Sleator) å’Œ [Robert Tarjan](https://en.wikipedia.org/wiki/Robert_Tarjan) å…±åŒå‘æ˜ï¼Œå‘è¡¨äº1985å¹´çš„ [è®ºæ–‡](https://www.cs.cmu.edu/~sleator/papers/self-adjusting.pdf) ä¸­ã€‚
>
> æœ¬æ–‡å†…å®¹ä¸ºMark Allen Weissæ‰€è‘— [æ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æï¼šJavaè¯­è¨€æè¿°](https://awesome-programming-books.github.io/algorithms/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90%EF%BC%9AJava%E8%AF%AD%E8%A8%80%E6%8F%8F%E8%BF%B0.pdf) ç›¸å…³ç« èŠ‚çš„æ•´ç†å’Œæ€»ç»“ã€‚ä»£ç äº¦æ¥è‡ªè¯¥ä¹¦ï¼Œç•¥ä½œæ”¹åŠ¨ã€‚

<br />

#### å±•å¼€

ä¼¸å±•æ ‘ã€Œå±•å¼€ã€çš„æƒ³æ³•åŸºäºè¿™æ ·ä¸€ä¸ªäº‹å®ï¼šå½“ä¸€ä¸ªç»“ç‚¹è¢«è®¿é—®æ—¶ (æŸ¥è¯¢æœ€å°/æœ€å¤§/æ˜¯å¦å­˜åœ¨/æ’å…¥/åˆ é™¤ç­‰)ï¼Œå®ƒå¾ˆå¯èƒ½å°†åœ¨ä¸ä¹…ä¹‹åè¢«å†æ¬¡è®¿é—®ã€‚å› æ­¤ä¸ºäº†æé«˜æ€»ä½“è®¿é—®æ•ˆç‡ï¼Œåœ¨è®¿é—®ä¸€ä¸ªç»“ç‚¹åï¼Œè€ƒè™‘å°†å…¶ç§»åŠ¨åˆ°æ ¹ç»“ç‚¹å¤„ï¼Œ **ç§»åŠ¨è¿‡ç¨‹å³ã€Œå±•å¼€ã€** ã€‚åœ¨ AVL æ ‘ä¸€èŠ‚ä¸­æˆ‘ä»¬å·²ç»æŒæ¡å¦‚ä½•é€šè¿‡æ—‹è½¬å‘ä¸€ä¸ªæ–¹å‘ç§»åŠ¨ç›®æ ‡ç»“ç‚¹ï¼Œå¾ˆå®¹æ˜“æƒ³åˆ°é€šè¿‡æœ‰é™æ¬¡çš„ã€Œå•æ—‹è½¬ã€å°†ç›®æ ‡ç»“ç‚¹å±•å¼€è‡³æ ¹ç»“ç‚¹å¤„ (ä½¿å…¶æˆä¸ºæ ¹ç»“ç‚¹)ã€‚

ä»¥ä¸‹å›¾ä¸ºä¾‹ï¼Œé€šè¿‡ç®€å•æ—‹è½¬å°†å·¦ä¾§æ ‘çš„ç»“ç‚¹ 1 å±•å¼€è‡³æ ¹å¤„å¾—åˆ°å³ä¾§æ ‘ã€‚åŒæ—¶æˆ‘ä»¬å¸Œæœ›åœ¨å±•å¼€è¿‡ç¨‹ä¸­èƒ½å¤Ÿé™ä½æ ‘é«˜ï¼Œè€Œä¸‹å›¾å•æ—‹è½¬æ–¹å¼æ˜¾ç„¶æ²¡æœ‰æ”¹å˜æ ‘é«˜ã€‚

![image.png](https://pic.leetcode-cn.com/1660706904-GveWEq-image.png)

ä¸ºäº†ä½¿å¾—å±•å¼€åŒæ—¶å…·æœ‰é™ä½æ ‘é«˜çš„æ•ˆæœï¼Œä¼¸å±•æ ‘é‡‡ç”¨ **åŒæ—‹è½¬ä¸å•æ—‹è½¬ç»“åˆ** çš„æ–¹å¼å±•å¼€ã€‚ä¸»è¦ä¸ºä»¥ä¸‹ä¸‰ç§æƒ…å½¢ï¼Œæ¯ç§æƒ…å½¢æœ‰å¯¹ç§°çš„ä¸¤ç§å­æƒ…å½¢ (ä¸å†åˆ—å‡º)ã€‚

```text
å•æ—‹è½¬: ä¸ AVL æ ‘ä¸­ä»‹ç»çš„å•æ—‹è½¬ç›¸åŒï¼Œåˆ†ä¸ºå·¦å•æ—‹çŠ¶å’Œå³å•æ—‹è½¬ã€‚
ä¹‹å­—å½¢åŒæ—‹è½¬ï¼šä¸ AVL æ ‘ä¸­ä»‹ç»çš„ä¹‹å­—å½¢åŒæ—‹è½¬ç›¸åŒï¼Œå®é™…ä¸Šå°±æ˜¯è¿ç»­ä¸¤æ¬¡ä¸åŒå‘çš„å•æ—‹è½¬ï¼Œåˆ†ä¸ºå·¦å³åŒæ—‹è½¬å’Œå³å·¦åŒæ—‹è½¬ã€‚
ä¸€å­—å½¢åŒæ—‹è½¬ï¼šå®é™…ä¸Šå°±æ˜¯è¿ç»­ä¸¤æ¬¡åŒå‘çš„å•æ—‹è½¬ï¼Œåˆ†ä¸ºå·¦å·¦åŒæ—‹è½¬å’Œå³å³åŒæ—‹è½¬ã€‚
```

å¦‚ä¸‹å›¾å·¦ä¾§æ˜¯æˆ‘ä»¬åœ¨ AVL æ ‘ä¸€èŠ‚ä¸­å·²ç»ç†Ÿæ‚‰çš„ä¹‹å­—å½¢å·¦å³åŒæ—‹è½¬ (å…ˆå·¦æ—‹ $P-X$ ï¼Œå†å³æ—‹ $X-G$ )ï¼Œå³ä¾§æ˜¯ä¸€å­—å½¢å³å³åŒæ—‹è½¬ (å…ˆå³æ—‹ $G-P$ ï¼Œå†å³æ—‹ $P-X$ )ã€‚

![image.png](https://pic.leetcode-cn.com/1660706954-RvPxlZ-image.png)

ä¼¸å±•æ ‘ä¸­çš„ã€Œå±•å¼€ã€æ“ä½œè¦æ±‚ **åœ¨èƒ½å¤ŸåŒæ—‹è½¬æ—¶é‡‡ç”¨åŒæ—‹è½¬ï¼Œåªèƒ½å•æ—‹è½¬æ—¶æ‰æ‰§è¡Œå•æ—‹è½¬** ã€‚ç°åœ¨æˆ‘ä»¬åˆ©ç”¨æ­¤è§„åˆ™å±•å¼€å‰é¢ç»™å‡ºçš„ 1 åˆ° 6 çš„é“¾çŠ¶æ ‘ï¼Œå¦‚ä¸‹ï¼Œå±•å¼€è¿‡ç¨‹ä¸ºä¸¤æ¬¡ä¸€å­—å½¢çš„åŒæ—‹è½¬å’Œä¸€æ¬¡å•æ—‹è½¬ã€‚å°½ç®¡ç”±äºç»“ç‚¹æ ‘è¾ƒå°‘è€Œæ— æ³•å¾ˆå¥½åœ°çœ‹å‡ºæ ‘é«˜å‡å°çš„æ•ˆæœï¼Œä½†æ€»ä½“ä¸Šï¼Œç›¸æ¯”ç®€å•çš„å•æ—‹è½¬ï¼Œæˆ‘ä»¬ç¡®å®èƒ½å¤Ÿçœ‹åˆ°æ ‘é«˜å‡å°çš„æ•ˆæœã€‚

![image.png](https://pic.leetcode-cn.com/1660707012-AlXOuk-image.png)

<br />

#### è‡ªé¡¶å‘ä¸‹å±•å¼€

å±•å¼€æ“ä½œçš„å‰ææ˜¯æ‰¾åˆ°ç›®æ ‡ç»“ç‚¹ï¼Œå› æ­¤éœ€è¦ä¸€æ¬¡éå†æ¥æ‰¾åˆ°ç›®æ ‡ç»“ç‚¹ï¼Œç„¶åå†æ²¿ç€æ­¤è·¯å¾„å°†ç›®æ ‡ç»“ç‚¹æ—‹è½¬è‡³æ ¹ç»“ç‚¹ï¼Œè¿™æ˜¾ç„¶éœ€è¦ä¿å­˜è·¯å¾„ä¿¡æ¯ã€‚åœ¨ AVL æ ‘ä¸­æˆ‘ä»¬ä»¥é€’å½’è°ƒç”¨çš„æ–¹å¼ï¼Œå€ŸåŠ©éšå¼ä¿å­˜äº†è·¯å¾„ä¿¡æ¯çš„é€’å½’æ ˆå®ç°ä¸Šè¿°åšæ³•ã€‚è¿™é‡Œæˆ‘ä»¬å°†ä»‹ç»ä¸€ç§ **æ— éœ€æ ˆç©ºé—´çš„ã€Œè‡ªé¡¶å‘ä¸‹ã€å±•å¼€** ï¼Œå³æ— éœ€éå†æ‰¾åˆ°ç›®æ ‡åå†å±•å¼€ï¼Œè€Œæ˜¯åœ¨è‡ªé¡¶å‘ä¸‹å¯»æ‰¾ç›®æ ‡çš„è¿‡ç¨‹ä¸­å®æ—¶åœ°å±•å¼€ã€‚

åœ¨å‰é¢çš„ä¾‹å­ä¸­æˆ‘ä»¬æ²¡æœ‰å±•ç¤ºä¹‹å­—å½¢æ—‹è½¬çš„è¿‡ç¨‹ï¼Œå®é™…ä¸Šï¼Œæœ¬èŠ‚ç»™å‡ºçš„ã€Œè‡ªé¡¶å‘ä¸‹ã€çš„å±•å¼€å®ç°ä¸­ï¼Œ **å¯¹ä¹‹å­—å½¢çš„æƒ…å†µæŒ‰ç…§ã€Œå•æ—‹è½¬ã€å¤„ç†** ã€‚æ­¤å¤–ï¼Œå±•å¼€çš„è¿‡ç¨‹ä¸­å§‹ç»ˆç»´æŠ¤æ ‘ $L$ ã€æ ‘ $M$ ä»¥åŠæ ‘ $R$ ï¼Œä½¿å¾—æ—‹è½¬æ“ä½œå¾—åˆ°ç®€åŒ–ï¼Œå…¶å®šä¹‰å¦‚ä¸‹ã€‚

>  æ•´æ£µæ ‘ä¸­å°äºä¸­é—´æ ‘ $M$ çš„æ ¹ç»“ç‚¹ä½†ä¸åœ¨ $M$ ä¸­çš„ç»“ç‚¹å­˜å‚¨åœ¨ $L$ æ ‘ä¸­ï¼Œå¤§äºä¸­é—´æ ‘ $M$ çš„æ ¹ç»“ç‚¹ä½†ä¸åœ¨ $M$ ä¸­çš„ç»“ç‚¹å­˜å‚¨åœ¨ $R$ æ ‘ä¸­ã€‚åˆå§‹æ—¶ $M$ å³ä¸ºåŸæ ‘ï¼Œ$L, R$ ä¸ºç©ºæ ‘ã€‚

ä¸‹å›¾ä»ä¸Šåˆ°ä¸‹è¡¨ç¤º **å•æ—‹è½¬ã€ä¹‹å­—å½¢æ—‹è½¬ (åŒå•æ—‹è½¬) ä»¥åŠä¸€å­—å½¢æ—‹è½¬** ã€‚å¯ä»¥çœ‹åˆ°ï¼Œä¸ AVL çš„æ—‹è½¬ç›¸æ¯”ï¼Œè¿™é‡Œçš„ã€Œå•æ—‹è½¬ã€å®é™…ä¸Šåªæ˜¯ä¿®æ”¹äº†ä¸€äº›é“¾æ¥å…³ç³» ( AVL å•æ—‹è½¬æœ¬è´¨ä¹Ÿæ˜¯ä¿®æ”¹ä¸€äº›é“¾æ¥å…³ç³»ï¼Œä½†é‡ç‚¹åœ¨äºæ—‹è½¬ä¸»ä½“ç›®æ ‡ç»“ç‚¹ç›¸å¯¹å…³ç³»çš„æ”¹å˜ï¼Œä¾‹å¦‚ä¸‹å›¾çš„å•æ—‹è½¬ï¼Œè‹¥ä¸º AVL ä¸­çš„å•æ—‹è½¬ï¼Œåˆ™ $X$ åˆ° $Y$ çš„é“¾æ¥ã€Œå³æ—‹ã€åå°†å˜ä¸º $Y$ åˆ° $X$ çš„é“¾æ¥)ï¼Œè€Œã€Œä¸€å­—å½¢æ—‹è½¬ã€ä¹Ÿåªæ˜¯æ‰§è¡Œäº†ä¸€æ¬¡ $Y-X$ å³æ—‹åä¿®æ”¹äº†ä¸€äº›é“¾æ¥å…³ç³»ã€‚å› æ­¤ç›¸æ¯” AVL æ ‘çš„å®ç°ï¼Œã€Œè‡ªé¡¶å‘ä¸‹ã€ä¼¸å±•æ ‘çš„ä»£ç ååˆ†æ˜“äºç¼–å†™ã€‚

![image.png](https://pic.leetcode-cn.com/1660707064-QHwUvv-image.png)

å®é™…ç¼–ç¨‹ä¸­åº”ç”¨äº†ä¸€äº›æŠ€å·§ï¼Œä¾‹å¦‚åˆ©ç”¨ $nullNode$ æ¥ç®€åŒ–ç¨‹åºå¹¶æé«˜äº†ç¨‹åºæ•ˆç‡ã€‚é€šè¿‡è®¾ç½® $header$ æ¥ä¿å­˜ $L$ å’Œ $R$ é¦–æ¬¡ä¸ä¸ºç©ºæ ‘æ—¶çš„æ ‘æ ¹ï¼Œä»¥ä¾¿äºæœ€åçš„ **ç»„è£…** æ“ä½œã€‚ä¸‹å›¾è¡¨ç°äº†å±•å¼€æ“ä½œæœ€åçš„ç»„è£…åŠ¨ä½œï¼ŒåŒæ ·åªæ˜¯ç®€å•åœ°ä¿®æ”¹ä¸€äº›é“¾æ¥å…³ç³»ã€‚å…·ä½“å®ç°ä»¥åŠæåˆ°çš„ä¸€äº›å®ç°æŠ€å·§åœ¨åˆçœ‹æ—¶è¾ƒéš¾ç†è§£ï¼Œå› æ­¤æˆ‘åœ¨æœ¬æ–‡ã€Œä¸»è¦æ–¹æ³•ã€ä»¥åŠã€Œç±»çš„å®ç°ä»£ç ã€ä¸­æä¾›äº†è¯¦ç»†æ³¨é‡Šï¼Œè¯·è¯»è€…åŠ¡å¿…ä»”ç»†é˜…è¯»ã€‚

![image.png](https://pic.leetcode-cn.com/1660707113-IQMlgo-image.png)

<br />


#### ä¼¸å±•æ ‘ç±»æ¶æ„

ä»¥ä¸‹æ˜¯ä¼¸å±•æ ‘ SplayTree æ¶æ„ã€‚

| ç±»æˆå‘˜/æ–¹æ³•                                           | æè¿°                                 |
| ----------------------------------------------------- | ------------------------------------ |
| `private BinaryNode<E> root`                          | å­—æ®µï¼Œsplayæ ‘çš„æ ¹ç»“ç‚¹                |
| `private BinaryNode<E> newNode`                       | å­—æ®µï¼Œæ’å…¥ç»“ç‚¹                       |
| `private BinaryNode<E> nullNode`                      | å­—æ®µï¼Œä¸ºæ–¹ä¾¿ç¼–ç¨‹è€Œè®¾ç½®çš„ $null$ ç»“ç‚¹ |
| `public SplayTree()`                                  | æ„é€ å™¨                               |
| `public void makeEmpty()`                             | æ ‘ç½®ç©º                               |
| `public boolean isEmpty()`                            | æ ‘åˆ¤ç©º                               |
| `public void insert(E e)`                             | æ’å…¥ç»“ç‚¹æ–¹æ³•                         |
| `public void remove(E e)`                             | åˆ é™¤ç»“ç‚¹æ–¹æ³•                         |
| `public E findMin()`                                  | æŸ¥æ‰¾æœ€å°ç»“ç‚¹é©±åŠ¨æ–¹æ³•                 |
| `public E findMax()`                                  | æŸ¥æ‰¾æœ€å¤§ç»“ç‚¹é©±åŠ¨æ–¹æ³•                 |
| `public boolean contains(E e)`                        | åˆ¤æ–­æ˜¯å¦åŒ…å«æŒ‡å®šå…ƒç´ æ–¹æ³•             |
| `public void printTree()`                             | æŒ‰ä¸­åºéå†æ‰“å°æ ‘çš„é©±åŠ¨æ–¹æ³•           |
| `public int size()`                                   | æ±‚æ ‘çš„ç»“ç‚¹ä¸ªæ•°é©±åŠ¨æ–¹æ³•               |
| `private BinaryNode<E> splay(E e, BinaryNode<E> t)`   | å±•å¼€æ–¹æ³•                             |
| `private BinaryNode<E> findMin(BinaryNode<E> t)`      | è¿”å›æ ‘çš„æœ€å°ç»“ç‚¹                     |
| `private BinaryNode<E> findMax(BinaryNode<E> t)`      | è¿”å›æ ‘çš„æœ€å¤§ç»“ç‚¹                     |
| `private void printTree(BinaryNode<E> t)`             | ä¸­åºéå†æ‰“å°æ ‘                       |
| `private int size(BinaryNode<E> t)`                   | é€’å½’åœ°éå†æ‰€æœ‰ç»“ç‚¹ï¼Œè¿”å›ç»“ç‚¹æ€»æ•°     |
| `private BinaryNode<E> rotateRight(BinaryNode<E> k2)` | å³å•æ—‹è½¬                             |
| `private BinaryNode<E> rotateLeft(BinaryNode<E> k1)`  | å·¦å•æ—‹è½¬                             |

ä»¥ä¸‹æ˜¯äºŒå‰æ ‘ç»“ç‚¹åµŒå¥—ç±» BinaryNode çš„æ¶æ„ã€‚

| ç±»æˆå‘˜/æ–¹æ³•                                                  | æè¿°                   |
| ------------------------------------------------------------ | ---------------------- |
| `public E element`                                           | å­—æ®µï¼Œæœ¬ç»“ç‚¹æ•°æ®       |
| `public BinaryNode<E> left`                                  | å­—æ®µï¼Œæœ¬ç»“ç‚¹çš„å·¦å­ç»“ç‚¹ |
| `public BinaryNode<E> right`                                 | å­—æ®µï¼Œæœ¬ç»“ç‚¹çš„å³å­ç»“ç‚¹ |
| `public BinaryNode()`                                        | æ„é€ å™¨                 |
| `public BinaryNode(E element)`                               | æ„é€ å™¨                 |
| `public BinaryNode(E element, BinaryNode<E> left, BinaryNode<E> right)` | æ„é€ å™¨                 |

<br />

#### ä¸»è¦æ–¹æ³•

##### splay

å±•å¼€ã€‚ä¼¸å±•æ ‘ä¸­æœ€ä¸»è¦çš„æ“ä½œï¼Œä¼ å…¥ç›®æ ‡ç»“ç‚¹å€¼ $e$ å’Œå½“å‰æ ¹ç»“ç‚¹ $t$ (ä¸­é—´æ ‘ $M$ çš„æ ¹ç»“ç‚¹) ï¼Œ **åœ¨å¯»æ‰¾ç›®æ ‡ç»“ç‚¹çš„è¿‡ç¨‹ä¸­å®Œæˆå±•å¼€** ã€‚é¦–å…ˆæ–°å»ºæ ‘ $L$ ä¸æ ‘ $R$ï¼Œåˆå§‹ä¸ºç©ºæ ‘ï¼Œæ–¹æ³•ä¸­å¹¶ä¸ç›´æ¥å£°æ˜è¿™ä¸¤æ£µæ ‘ï¼Œè€Œæ˜¯é€šè¿‡ $header, leftTreeMax, rightTreeMin$ æ¥åŠ¨æ€ç»´æŠ¤ã€‚åŠ¨æ€ç»´æŠ¤ä¸»è¦ä½“ç°åœ¨ $L$ ä¸­çš„ $leftTreeMax$ ä»¥åŠ $R$ ä¸­çš„ $rightTreeMin$ ï¼Œä¸€å¼€å§‹ä»¤æ­¤äºŒè€…ä¸º $header$ ï¼Œè¯¥å˜é‡ä»…ç”¨äºä¿å­˜ $L$ å’Œ $R$ åˆæ¬¡ä¸ä¸ºç©ºæ ‘æ—¶çš„æ ¹ç»“ç‚¹ï¼Œç”¨äºæœ€å $M, L, R$ çš„ç»„è£…ã€‚å¦‚å…¶åï¼Œåœ¨æ–¹æ³•çš„æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ­¤äºŒè€…å§‹ç»ˆä»£è¡¨ $L$ ä¸­æœ€å¤§ç»“ç‚¹ä»¥åŠ $R$ ä¸­æœ€å°ç»“ç‚¹ã€‚

> é¦–æ¬¡æ‰§è¡Œ `rightTreeMin.left = t` æ—¶ï¼Œå³ `header.left = t` ï¼Œä¸”æ­¤å `header.left` å¼•ç”¨ä¸å˜ï¼Œ `leftTreeMax.right = t` åŒç†ã€‚

```java
private BinaryNode<E> splay(E e, BinaryNode<E> t) { // è‡ªé¡¶å‘ä¸‹å±•å¼€ç›®æ ‡ç»“ç‚¹
    BinaryNode<E> leftTreeMax, rightTreeMin;
    header.left = header.right = nullNode;
    leftTreeMax = rightTreeMin = header;
    nullNode.element = e;   // ç¡®ä¿èƒ½å¤ŸåŒ¹é…ï¼Œä¾¿äºç¼–ç¨‹
    while(true) {
        int compareRes = e.compareTo(t.element);
        if(compareRes < 0) { // ç›®æ ‡åœ¨tçš„å·¦å­æ ‘ä¸­
            if(e.compareTo(t.left.element) < 0) t = rotateRight(t); // ä¸€å­—å‹å³æ—‹(å³å•æ—‹)
            if(t.left == nullNode) break; // tæ— å·¦å„¿å­ï¼Œå·²å®Œæˆä¸€æ¬¡å•æ—‹(åŒ…æ‹¬ä¹‹å­—å½¢)ï¼Œè·³å‡ºå¾ªç¯
            rightTreeMin.left = t; // æŒ‚æ¥åˆ°Rä¸‹ï¼ŒåŒæ—¶ä¿å­˜Ré¦–æ¬¡ä¸ä¸ºç©ºæ—¶çš„æ ¹ï¼Œä¸”æ­¤åhead.leftä¸å˜
            rightTreeMin = t; // æ›´æ–°rightTreeMin
            t = t.left; // ä»¤t.leftä¸ºä¸­é—´æ ‘Mçš„æ ¹ç»“ç‚¹
        }
        else if(compareRes > 0) { // ç›®æ ‡åœ¨tçš„å³å­æ ‘ä¸­
            if(e.compareTo(t.right.element) > 0) t = rotateLeft(t); // ä¸€å­—å‹å·¦æ—‹(å·¦å•æ—‹)
            if(t.right == nullNode) break; // tæ— å³å„¿å­ï¼Œå·²å®Œæˆä¸€æ¬¡å•æ—‹(åŒ…æ‹¬ä¹‹å­—å½¢)ï¼Œè·³å‡ºå¾ªç¯
            leftTreeMax.right = t; // æŒ‚æ¥åˆ°Lä¸‹ï¼ŒåŒæ—¶ä¿å­˜äº†Lé¦–æ¬¡ä¸ä¸ºç©ºæ—¶çš„æ ¹ï¼Œä¸”æ­¤åhead.rightä¸å˜
            leftTreeMax = t; // æ›´æ–°leftTreeMax
            t = t.right; // ä»¤t.rightä¸ºä¸­é—´æ ‘Mçš„æ ¹ç»“ç‚¹
        }
        else break; // ç›¸ç­‰å³å¯é€€å‡º
    } // åç»­å››å¥å®Œæˆç»„è£…
    leftTreeMax.right = t.left;
    rightTreeMin.left = t.right;
    t.left = header.right; // header.rightä¸ºLçš„æ ¹
    t.right = header.left; // header.leftä¸ºRçš„æ ¹
    return t;
}
```

<br />

##### insert

æ’å…¥å€¼ä¸º $e$ çš„ç»“ç‚¹ã€‚å½“å‰æ ‘ç©ºæ—¶ï¼Œå°†å¾…æ’å…¥çš„ç»“ç‚¹ä½œä¸ºæ ¹ç»“ç‚¹ï¼Œå¦åˆ™ **å°†ç›®æ ‡ç»“ç‚¹æ—‹è½¬è‡³æ ¹å¤„** ï¼Œå†æ ¹æ®è¯¥ç»“ç‚¹å€¼ä¸ $e$ çš„å¤§å°è°ƒæ•´é“¾æ¥å…³ç³»ã€‚

```java
public void insert(E e) { // æ’å…¥ç»“ç‚¹
    if(newNode == null) newNode = new BinaryNode<>(e);
    if(root == nullNode) { // å½“å‰ä¸ºç©ºæ ‘ï¼Œå°†newNodeä½œä¸ºrootæ’å…¥
        newNode.left = newNode.right = nullNode;
        root = newNode;
    }
    else { // å¦åˆ™å°†ç›®æ ‡ç»“ç‚¹æ—‹è½¬è‡³æ ¹å¤„ï¼Œæ¯”è¾ƒå¤§å°åæ’å…¥
        root = splay(e, root);
        int compareRes = e.compareTo(root.element);
        if(compareRes < 0) { // eå°äºrootçš„å€¼ï¼Œå°†newNodeä½œä¸ºæ ¹æ’å…¥
            newNode.left = root.left;
            newNode.right = root;
            root.left = nullNode;
            root = newNode;
        }
        else if(compareRes > 0) { // eå¤§äºrootçš„å€¼ï¼Œå°†newNodeä½œä¸ºæ ¹æ’å…¥
            newNode.right = root.right;
            newNode.left = root;
            root.right = nullNode;
            root = newNode;
        }
        else return; // ç›¸ç­‰æ—¶ä¸æ’å…¥
    }
    newNode = null; // ä¸‹ä¸€æ¬¡æ’å…¥æ—¶newNode == null
}
```

<br />

##### findMin/findMax

æŸ¥æ‰¾å…·æœ‰æœ€å°/æœ€å¤§æ•°æ®çš„ç»“ç‚¹çš„æ“ä½œç”±é©±åŠ¨æ–¹æ³•å’Œå…·ä½“æ–¹æ³•å®ç°ã€‚ä¸ AVL æ ‘ä¸­å¯¹åº”æ–¹æ³•çš„ä¸åŒä»…åœ¨äºæ­¤å¤„çš„å…·ä½“æ–¹æ³•åœ¨æ‰¾åˆ°ç›®æ ‡ç»“ç‚¹åè¦å¯¹å…¶æ‰§è¡Œä¸€æ¬¡ $splay$ æ“ä½œã€‚

```java
public E findMin() { // æŸ¥æ‰¾æœ€å°ç»“ç‚¹é©±åŠ¨æ–¹æ³•
    if(isEmpty()) throw new NoSuchElementException();
    return findMin(root).element;
}
private BinaryNode<E> findMin(BinaryNode<E> t) { // è¿”å›æ ‘çš„æœ€å°ç»“ç‚¹
    while(t.left != nullNode) t = t.left;
    root = splay(t.element, root);
    return t;
}
public E findMax() { // æŸ¥æ‰¾æœ€å¤§ç»“ç‚¹é©±åŠ¨æ–¹æ³•
    if(isEmpty()) throw new NoSuchElementException();
    return findMax(root).element;
}
private BinaryNode<E> findMax(BinaryNode<E> t) { // è¿”å›æ ‘çš„æœ€å¤§ç»“ç‚¹
    while(t.right != nullNode) t = t.right;
    root = splay(t.element, root);
    return t;
}
```

<br />

##### remove

è°ƒç”¨ $contains$ æ–¹æ³•æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨å€¼ä¸º $e$ çš„ç»“ç‚¹ï¼Œè‹¥ä¸å­˜åœ¨ç›´æ¥è¿”å›ï¼Œè‹¥å­˜åœ¨åˆ™é€šè¿‡ $contains$ æ–¹æ³•ï¼Œå·²å°†è¯¥ç»“ç‚¹å±•å¼€ä¸ºæ ¹ç»“ç‚¹ï¼Œæ ¹æ®æ­¤æ—¶ $root$ æœ‰æ— å·¦å„¿å­æ¥æ‰§è¡Œå…·ä½“çš„åˆ é™¤åŠ¨ä½œã€‚è‹¥æ— å·¦å„¿å­ï¼Œå¯ç›´æ¥åˆ é™¤ $root$ ï¼Œå³è®©åˆ é™¤åçš„æ ¹ç»“ç‚¹ä¸º $root.right$ ï¼Œå¦åˆ™é€šè¿‡ `splay(e, newRoot)` å°†æ­¤æ—¶æ ¹çš„å·¦å­æ ‘ä¸­å…·æœ‰æœ€å¤§å€¼çš„æ ¹ç»“ç‚¹ (å¿…å°äº $e$) å±•å¼€è‡³ $newRoot$ ï¼Œä»¥å…¶ä¸ºåˆ é™¤åçš„æ ¹ç»“ç‚¹ï¼Œå¹¶æ‰§è¡Œ `newRoot.right = root.right` ã€‚æ­¤åˆ é™¤ä¸º **æ‡’æƒ°åˆ é™¤** ï¼Œå³åªæ”¹å˜é“¾æ¥å…³ç³»æ¥è¾¾åˆ°åˆ é™¤çš„æ•ˆæœã€‚

```java
public void remove(E e) { // åˆ é™¤ç»“ç‚¹
    if(!contains(e)) return; // ä¸å­˜åœ¨ç›´æ¥è¿”å›ï¼Œè‹¥å­˜åœ¨ï¼Œåˆ™è¯¥ç›®æ ‡ç»“ç‚¹å·²è¢«å±•å¼€è‡³æ ¹
    BinaryNode<E> newRoot;
    if(root.left == nullNode) newRoot = root.right; // æ— å·¦å„¿å­ï¼Œç›´æ¥åˆ é™¤(æ‡’æƒ°åˆ é™¤)
    else { // æœ‰å·¦å„¿å­
        newRoot = root.left;
        newRoot = splay(e, newRoot); // å°†å·¦å­æ ‘ä¸­æœ€å¤§è€…æ—‹è½¬è‡³æ ¹ï¼Œä»¤å…¶ä¸ºåˆ é™¤æ“ä½œåçš„æ–°æ ¹
        newRoot.right = root.right; // å°†root.rightæ¥åˆ°newTree.rightä¸Š
    }
    root = newRoot;
}
```

<br />

##### contains

è‹¥ä¸ºç©ºæ ‘ç›´æ¥è¿”å› $false$ ï¼Œå¦åˆ™ä»¥å€¼ä¸º $e$ çš„ç»“ç‚¹ä¸ºç›®æ ‡æ‰§è¡Œ $splay$ ï¼Œæœ€åæ ¹æ® $splay$ çš„ç›®æ ‡ç»“ç‚¹å€¼æ˜¯å¦ç­‰äº $e$ æ¥è¿”å› $true$ æˆ– $false$ ã€‚

```java
public boolean contains(E e) { // åˆ¤æ–­æ ‘ä¸­æ˜¯å¦æœ‰æŒ‡å®šå…ƒç´ çš„ç»“ç‚¹
    if(isEmpty()) return false;
    root = splay(e, root);
    return root.element.compareTo(e) == 0;
}
```

<br />

##### rotateRight

å³å•æ—‹è½¬ï¼Œè§å‰è¿°è¯´æ˜ã€‚

<br />

##### rotateLeft

å·¦å•æ—‹è½¬ï¼Œè§å‰è¿°è¯´æ˜ã€‚

<br />

#### ç±»çš„å®ç°ä»£ç 

```java
class SplayTree<E extends Comparable<? super E>> {
    private BinaryNode<E> root, newNode;
    private final BinaryNode<E> nullNode;
    public SplayTree() {
        this.nullNode = new BinaryNode<>();
        this.root = this.nullNode.left = this.nullNode.right = this.nullNode;
    }
    public void insert(E e) { // æ’å…¥ç»“ç‚¹
        if(newNode == null) newNode = new BinaryNode<>(e);
        if(root == nullNode) { // å½“å‰ä¸ºç©ºæ ‘ï¼Œå°†newNodeä½œä¸ºrootæ’å…¥
            newNode.left = newNode.right = nullNode;
            root = newNode;
        }
        else { // å¦åˆ™å°†ç›®æ ‡ç»“ç‚¹æ—‹è½¬è‡³æ ¹å¤„ï¼Œæ¯”è¾ƒå¤§å°åæ’å…¥
            root = splay(e, root);
            int compareRes = e.compareTo(root.element);
            if(compareRes < 0) { // eå°äºrootçš„å€¼ï¼Œå°†newNodeä½œä¸ºæ ¹æ’å…¥
                newNode.left = root.left;
                newNode.right = root;
                root.left = nullNode;
                root = newNode;
            }
            else if(compareRes > 0) { // eå¤§äºrootçš„å€¼ï¼Œå°†newNodeä½œä¸ºæ ¹æ’å…¥
                newNode.right = root.right;
                newNode.left = root;
                root.right = nullNode;
                root = newNode;
            }
            else return; // ç›¸ç­‰æ—¶ä¸æ’å…¥
        }
        newNode = null; // ä¸‹ä¸€æ¬¡æ’å…¥æ—¶newNode == null
    }
    public void remove(E e) { // åˆ é™¤ç»“ç‚¹
        if(!contains(e)) return; // ä¸å­˜åœ¨ç›´æ¥è¿”å›ï¼Œè‹¥å­˜åœ¨ï¼Œåˆ™è¯¥ç›®æ ‡ç»“ç‚¹å·²è¢«å±•å¼€è‡³æ ¹
        BinaryNode<E> newRoot;
        if(root.left == nullNode) newRoot = root.right; // æ— å·¦ç»“ç‚¹ï¼Œç›´æ¥åˆ é™¤(æ‡’æƒ°åˆ é™¤)
        else { // æœ‰å·¦ç»“ç‚¹
            newRoot = root.left;
            newRoot = splay(e, newRoot); // å°†å·¦å­æ ‘ä¸­æœ€å¤§è€…æ—‹è½¬è‡³æ ¹ï¼Œä»¤å…¶ä¸ºåˆ é™¤æ“ä½œåçš„æ–°æ ¹
            newRoot.right = root.right; // å°†root.rightæ¥åˆ°newTree.rightä¸Š
        }
        root = newRoot;
    }
    public E findMin() { // æŸ¥æ‰¾æœ€å°ç»“ç‚¹é©±åŠ¨æ–¹æ³•
        if(isEmpty()) throw new NoSuchElementException();
        return findMin(root).element;
    }
    public E findMax() { // æŸ¥æ‰¾æœ€å¤§ç»“ç‚¹é©±åŠ¨æ–¹æ³•
        if(isEmpty()) throw new NoSuchElementException();
        return findMax(root).element;
    }
    public boolean contains(E e) { // åˆ¤æ–­æ ‘ä¸­æ˜¯å¦æœ‰æŒ‡å®šå…ƒç´ çš„ç»“ç‚¹
        if(isEmpty()) return false;
        root = splay(e, root);
        return root.element.compareTo(e) == 0;
    }
    public void printTree(){ // æŒ‰ä¸­åºéå†æ‰“å°æ ‘çš„é©±åŠ¨æ–¹æ³•
        if(isEmpty()) System.out.println("Empty tree");
        else printTree(root);
    }
    public int size() { // æ±‚æ ‘çš„ç»“ç‚¹ä¸ªæ•°é©±åŠ¨æ–¹æ³•
        return size(root);
    }
    public void makeEmpty() { // æ ‘ç½®ç©º
        root = nullNode;
    }
    public boolean isEmpty() { // æ ‘åˆ¤ç©º
        return root == nullNode;
    }
    private final BinaryNode<E> header = new BinaryNode<>(null);
    private BinaryNode<E> splay(E e, BinaryNode<E> t) { // è‡ªé¡¶å‘ä¸‹å±•å¼€ç›®æ ‡ç»“ç‚¹
        BinaryNode<E> leftTreeMax, rightTreeMin;
        header.left = header.right = nullNode;
        leftTreeMax = rightTreeMin = header;
        nullNode.element = e;   // ç¡®ä¿èƒ½å¤ŸåŒ¹é…ï¼Œä¾¿äºç¼–ç¨‹
        while(true) {
            int compareRes = e.compareTo(t.element);
            if(compareRes < 0) { // ç›®æ ‡åœ¨tçš„å·¦å­æ ‘ä¸­
                if(e.compareTo(t.left.element) < 0) t = rotateRight(t); // ä¸€å­—å‹å³æ—‹
                if(t.left == nullNode) break; // tæ— å·¦å„¿å­ï¼Œå·²å®Œæˆä¸€æ¬¡å•æ—‹(åŒ…æ‹¬ä¹‹å­—å½¢)ï¼Œè·³å‡ºå¾ªç¯
                rightTreeMin.left = t; // æŒ‚æ¥åˆ°Rä¸‹ï¼ŒåŒæ—¶ä¿å­˜Ré¦–æ¬¡ä¸ä¸ºç©ºæ—¶çš„æ ¹ï¼Œä¸”æ­¤åhead.leftä¸å˜
                rightTreeMin = t; // æ›´æ–°rightTreeMin
                t = t.left; // ä»¤t.leftä¸ºä¸­é—´æ ‘Mçš„æ ¹ç»“ç‚¹
            }
            else if(compareRes > 0) { // ç›®æ ‡åœ¨tçš„å³å­æ ‘ä¸­
                if(e.compareTo(t.right.element) > 0) t = rotateLeft(t); // ä¸€å­—å‹å·¦æ—‹
                if(t.right == nullNode) break; // tæ— å³å„¿å­ï¼Œå·²å®Œæˆä¸€æ¬¡å•æ—‹(åŒ…æ‹¬ä¹‹å­—å½¢)ï¼Œè·³å‡ºå¾ªç¯
                leftTreeMax.right = t; // æŒ‚æ¥åˆ°Lä¸‹ï¼ŒåŒæ—¶ä¿å­˜äº†Lé¦–æ¬¡ä¸ä¸ºç©ºæ—¶çš„æ ¹ï¼Œä¸”æ­¤åhead.rightä¸å˜
                leftTreeMax = t; // æ›´æ–°leftTreeMax
                t = t.right; // ä»¤t.rightä¸ºä¸­é—´æ ‘Mçš„æ ¹ç»“ç‚¹
            }
            else break; // ç›¸ç­‰å³å¯é€€å‡º
        } // åç»­å››å¥å®Œæˆç»„è£…
        leftTreeMax.right = t.left;
        rightTreeMin.left = t.right;
        t.left = header.right; // header.rightä¸ºLçš„æ ¹
        t.right = header.left; // header.leftä¸ºRçš„æ ¹
        return t;
    }
    private BinaryNode<E> rotateRight(BinaryNode<E> k2){ // å³å•æ—‹
        BinaryNode<E> k1 = k2.left;
        k2.left = k1.right;
        k1.right = k2;
        return k1; // è¿”å›è°ƒæ•´ååŸå¤±è¡¡å¤„ç»“ç‚¹
    }
    private BinaryNode<E> rotateLeft(BinaryNode<E> k1){ // å·¦å•æ—‹
        BinaryNode<E> k2 = k1.right;
        k1.right = k2.left;
        k2.left = k1;
        return k2; // è¿”å›è°ƒæ•´ååŸå¤±è¡¡å¤„ç»“ç‚¹
    }
    private BinaryNode<E> findMin(BinaryNode<E> t) { // è¿”å›æ ‘çš„æœ€å°ç»“ç‚¹
        while(t.left != nullNode) t = t.left;
        root = splay(t.element, root);
        return t;
    }
    private BinaryNode<E> findMax(BinaryNode<E> t) { // è¿”å›æ ‘çš„æœ€å¤§ç»“ç‚¹
        while(t.right != nullNode) t = t.right;
        root = splay(t.element, root);
        return t;
    }
    private void printTree(BinaryNode<E> t) { // ä¸­åºéå†æ‰“å°æ ‘
        if(t != nullNode) {
            printTree(t.left);
            System.out.println(t.element);
            printTree(t.right);
        }
    }
    private int size(BinaryNode<E> t) { // é€’å½’åœ°éå†æ‰€æœ‰ç»“ç‚¹ï¼Œè¿”å›ç»“ç‚¹æ€»æ•°
        if(t != nullNode) {
            if(t.left != nullNode && t.right != nullNode) {
                return 1 + size(t.left) + size(t.right);
            }
            else {
                return t.left != nullNode ? 1 + size(t.left) : 1 + size(t.right);
            }
        }
        return 0;
    }
    /**
     * äºŒå‰æ ‘ç»“ç‚¹åµŒå¥—ç±»
     */
    private static class BinaryNode<E>{
        public E element;
        public BinaryNode<E> left, right;
        @SuppressWarnings("unused")
        public BinaryNode(){
            this(null, null, null);
        }
        public BinaryNode(E element){
            this(element, null, null);
        }
        public BinaryNode(E element, BinaryNode<E> left, BinaryNode<E> right){
            this.element = element;
            this.left = left;
            this.right = right;
        }
    }
}
```

<br />

#### æµ‹è¯•ä»£ç 

```java
package com.yukiyama;

import java.util.NoSuchElementException;

public class SplayTreeDemo {

    public static void main(String[] args) {
        SplayTree<Integer> t = new SplayTree<>( );
        int[] elements = {3,2,1,4,5,6,7,16,15,14,13,12,11,10,8,9};
        for(int e : elements) t.insert(e);
        t.printTree();
        System.out.printf("size: %d, min: %d, max: %d\n", t.size(), t.findMin(), t.findMax()); // è¾“å‡º10
        System.out.printf("has 10? %s, has 100? %s\n", t.contains(10), t.contains(100));
        t.remove(1);
        t.remove(10);
        t.remove(16);
        t.printTree();
        System.out.printf("size: %d\n", t.size());// è¾“å‡º0
        System.out.println("is empty: " + t.isEmpty()); // false
        t.makeEmpty();
        System.out.println("is empty: " + t.isEmpty()); // true
    }

}
```

<br />